
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„æ–°å›žå¿†å½• - äº’åŠ¨æ‰‹è´¦å±•ç¤º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;900&family=Shadows+Into+Light&family=Space+Mono&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit', sans-serif; background: #0f172a; color: #f8fafc; overflow: hidden; height: 100vh; display: flex; align-items: center; justify-content: center; margin: 0; }
        .handwritten { font-family: 'Shadows Into Light', cursive; }
        .spread-container { 
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1); 
            box-shadow: 0 40px 100px rgba(0,0,0,0.8); 
            display: flex; 
            border-radius: 2rem; 
            overflow: hidden; 
            background: #1e293b;
            position: relative;
        }
        .page { width: 800px; height: 1120px; background: #FCFBF4; position: relative; overflow: hidden; flex-shrink: 0; }
        .node { position: absolute; transform-origin: top left; }
        .nav-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 9999px; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(12px); transition: all 0.3s; z-index: 100; }
        .nav-btn:hover { background: rgba(255,255,255,0.15); transform: translateY(-50%) scale(1.1); }
        .nav-btn.disabled { opacity: 0.1; cursor: not-allowed; }
        
        /* Interactive Component Styles */
        .perspective-1000 { perspective: 1000px; }
        .preserve-3d { transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .rotate-x-45 { transform: rotateX(45deg); }
        .rotate-x-0 { transform: rotateX(0deg); }
        
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .animate-spin-slow { animation: spin 4s linear infinite; }
    </style>
</head>
<body>
    <div id="viewer" class="flex flex-col items-center gap-6 w-full h-full p-8 justify-center">
        <h1 class="text-3xl font-black mb-4 tracking-tight">æˆ‘çš„æ–°å›žå¿†å½•</h1>
        
        <button id="prev-btn" class="nav-btn left-12"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"></polyline></svg></button>
        <button id="next-btn" class="nav-btn right-12"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"></polyline></svg></button>

        <div id="spread-wrapper">
          <div id="spread" class="spread-container">
              <div id="left-page" class="page" style="border-right: 2px solid rgba(0,0,0,0.1); box-shadow: inset -20px 0 40px rgba(0,0,0,0.04);"></div>
              <div id="right-page" class="page" style="background: #fff; box-shadow: inset 20px 0 40px rgba(0,0,0,0.04);"></div>
          </div>
        </div>

        <div id="dots" class="flex gap-2 mt-4"></div>
    </div>

    <script>
        const bookData = {"id":1768568867031,"title":"æˆ‘çš„æ–°å›žå¿†å½•","categoryId":"life","style":"classic","cover":"https://picsum.photos/seed/1768568867031/600/400","pages":[{"id":1768568867031,"nodes":[{"id":1768568869761,"type":"filmroll","x":114.48713055653684,"y":87.25886835283944,"props":{"width":96,"height":160,"color":"#d19600","title":"KODAK 400","subtitle":"35mm color film","images":""},"imgBg":"https://picsum.photos/seed/0.4647820732710034/400/300","isOpen":true},{"id":1768568871570,"type":"record","x":96.8047314358671,"y":340.8171739641468,"props":{"width":480,"height":342,"color":"#2d3436","title":"My Favorite Song","audioUrl":"https://assets.mixkit.co/active_storage/sfx/123/123-preview.mp3"},"imgBg":"https://picsum.photos/seed/0.8121837450746255/400/300","isOpen":false},{"id":1768568873018,"type":"accordion","x":149.9064795325889,"y":765.16704224959,"props":{"width":531,"height":247,"title":"2024 å›žå¿†å½•"},"imgBg":"https://picsum.photos/seed/0.5551808420940876/400/300","isOpen":true},{"id":1768569095512,"type":"sticker","x":605.0067359764419,"y":64.59862848855703,"props":{"sticker":"â¤ï¸","size":60,"rotate":0},"imgBg":"https://picsum.photos/seed/0.8086278212186682/400/300","isOpen":false},{"id":1768569097114,"type":"sticker","x":409.08838083144946,"y":169.08841511020358,"props":{"sticker":"â˜•","size":60,"rotate":0},"imgBg":"https://picsum.photos/seed/0.8289835116363474/400/300","isOpen":false},{"id":1768569098992,"type":"sticker","x":564.1904119879018,"y":482.5577749751433,"props":{"sticker":"ðŸŒ¸","size":60,"rotate":0},"imgBg":"https://picsum.photos/seed/0.33151964093131714/400/300","isOpen":false},{"id":1768569102825,"type":"sticker","x":98.8843185185448,"y":350.3128887821219,"props":{"sticker":"âœ¨","size":60,"rotate":0},"imgBg":"https://picsum.photos/seed/0.35486243397139194/400/300","isOpen":false},{"id":1768569107816,"type":"flipbox","x":608.0475484390229,"y":238.2720495043119,"props":{"width":160,"height":160,"color":"#4dabf7","title":"ç‚¹å‡»å¼€å¯æƒŠå–œ"},"imgBg":"https://picsum.photos/seed/0.10743034888345504/400/300","isOpen":true}],"connections":[]},{"id":1768568867032,"nodes":[{"id":1768568875496,"type":"window","x":231.6211269466787,"y":333.84199370111145,"props":{"width":403,"height":514,"color":"#868e96"},"imgBg":"https://picsum.photos/seed/0.8178510300593664/400/300","isOpen":true},{"id":1768568877051,"type":"suit","x":69.0429472405637,"y":540.494586618805,"props":{"width":267,"height":498,"color":"#1971c2","title":"åŽ»å·´é»Žæ—…è¡Œ"},"imgBg":"https://picsum.photos/seed/0.21594435702733394/400/300","isOpen":true},{"id":1768568878882,"type":"wanted","x":425.5094329978293,"y":53.26382537671253,"props":{"width":346,"height":521,"title":"èµé‡‘ $100,000"},"imgBg":"https://picsum.photos/seed/0.9523813584344849/400/300","isOpen":true},{"id":1768568930554,"type":"filmroll","x":60.12733553165896,"y":60.931323983624594,"props":{"width":137,"height":283,"color":"#FFB800","title":"KODAK 400","subtitle":"35mm color film","images":""},"imgBg":"https://picsum.photos/seed/0.18194269751573933/400/300","isOpen":true},{"id":1768569070587,"type":"envelope","x":433.31286432302886,"y":608.3944748063179,"props":{"w":240,"h":385,"color":"#E5D3B3","letterText":"äº²çˆ±çš„åˆ›ä½œè€…ï¼š\n\næ¯ä¸€è¡Œä»£ç éƒ½æ˜¯ä¸€é¦–è¯—ã€‚","fontSize":14,"textColor":"#444444","fontFamily":"Shadows Into Light"},"imgBg":"https://picsum.photos/seed/0.7502168929100589/400/300","isOpen":false}],"connections":[]},{"id":1768568867033,"nodes":[{"id":1768568887082,"type":"polaroid","x":145.740234849027,"y":198.54422609273428,"props":{"width":500,"title":"é‚£å¤©çš„é˜³å…‰çœŸå¥½"},"imgBg":"https://picsum.photos/seed/0.9149950507484782/400/300","isOpen":true},{"id":1768568894201,"type":"text","x":203.3084687030144,"y":865.5417302719981,"props":{"text":"ç‚¹å‡»æ­¤å¤„ç¼–è¾‘æ–‡å­—","fontSize":24,"width":200,"padding":12,"color":"#1e293b","bgColor":"#ffffff00","bgPattern":"none","borderColor":"#cbd5e1","borderWidth":0,"borderRadius":0,"borderStyle":"solid","fontFamily":"Outfit"},"imgBg":"https://picsum.photos/seed/0.24071614494496307/400/300","isOpen":false},{"id":1768568897441,"type":"sticker","x":171.546684507711,"y":83.40775215702803,"props":{"sticker":"ðŸŒˆ","size":60,"rotate":0},"imgBg":"https://picsum.photos/seed/0.6155596465209038/400/300","isOpen":false}],"connections":[]},{"id":1768568867034,"nodes":[],"connections":[]}],"lastModified":1768569107816};
        let activeIdx = 0;
        const nodeStates = {};

        function renderNode(node) {
            const div = document.createElement('div');
            div.className = 'node';
            div.style.left = node.x + 'px';
            div.style.top = node.y + 'px';
            div.onclick = (e) => {
                e.stopPropagation();
                nodeStates[node.id] = !nodeStates[node.id];
                updateView();
            };
            
            const isOpen = nodeStates[node.id] || false;
            const p = node.props;
            let content = '';

            switch(node.type) {
                case 'text':
                    content = `<div style="font-size:${p.fontSize}px; color:${p.color}; width:${p.width}px; background:${p.bgColor}; padding:${p.padding}px; border-radius:${p.borderRadius}px; border:${p.borderWidth}px ${p.borderStyle} ${p.borderColor}; font-family:${p.fontFamily}; line-height: 1.2;">${p.text}</div>`;
                    break;
                case 'sticker':
                    const isImg = p.sticker && (p.sticker.startsWith('http') || p.sticker.startsWith('data:'));
                    content = isImg 
                        ? `<img src="${p.sticker}" style="width:${p.size}px; transform:rotate(${p.rotate}deg);">`
                        : `<span style="font-size:${p.size}px; transform:rotate(${p.rotate}deg); display:inline-block;">${p.sticker}</span>`;
                    break;
                case 'polaroid':
                    content = `<div class="bg-white p-3 pt-3 pb-8 shadow-xl rounded-sm transition-transform duration-500" style="width: ${p.width || 128}px; transform: ${isOpen ? 'rotate(-5deg) scale(1.1)' : 'rotate(2deg)'}">
                        <div class="w-full aspect-square bg-slate-100 overflow-hidden relative mb-2">
                           <img src="${node.imgBg}" class="w-full h-full object-cover">
                        </div>
                        <p class="handwritten text-center text-[10px] text-slate-600">${p.title}</p>
                    </div>`;
                    break;
                case 'envelope':
                    content = `<div class="relative" style="width: ${p.w || 240}px; height: ${p.h || 160}px;">
                        <div class="absolute inset-0 rounded-sm shadow-inner z-0" style="background: ${p.color || '#E5D3B3'}; filter: brightness(0.9);"></div>
                        <div class="absolute inset-x-3 bottom-2 bg-white transition-all duration-700 shadow-xl p-4 border border-slate-200 ${isOpen ? '-translate-y-[85%] z-20' : 'translate-y-0 z-[5]'}" style="height: 90%; font-family: ${p.fontFamily || 'Shadows Into Light'}; font-size: ${p.fontSize || 14}px; color: ${p.textColor || '#444'}; overflow: hidden;">
                            ${p.letterText}
                        </div>
                        <div class="absolute inset-0 z-30 rounded-sm border-2 border-black/5" style="background: ${p.color || '#E5D3B3'};">
                            <div class="absolute inset-0 flex items-center justify-center font-black text-[10px] text-slate-800/40 uppercase tracking-tighter">PRIVATE</div>
                            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 rounded-full flex items-center justify-center text-white text-[12px] transition-all duration-500 ${isOpen ? 'opacity-0 scale-50' : 'bg-rose-500 opacity-100 scale-100'}">â™¥</div>
                        </div>
                    </div>`;
                    break;
                case 'flipbox':
                    content = `<div class="perspective-1000" style="width: ${p.width || 160}px; height: ${p.height || 160}px;">
                        <div class="relative w-full h-full preserve-3d ${isOpen ? 'rotate-y-180' : ''}">
                            <div class="absolute inset-0 backface-hidden bg-white rounded-2xl shadow-xl border-4 border-white flex flex-col items-center justify-center p-4 text-center" style="background: ${p.color || '#4dabf7'}; color: white;">
                                <span class="text-xs font-black uppercase tracking-widest">${p.title}</span>
                            </div>
                            <div class="absolute inset-0 backface-hidden rotate-y-180 bg-slate-50 rounded-2xl shadow-xl overflow-hidden">
                                <img src="${node.imgBg}" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </div>`;
                    break;
                case 'drawer':
                    content = `<div class="relative flex items-center" style="width: ${p.width || 192}px; height: ${p.height || 112}px;">
                        <div class="relative z-20 w-full h-full bg-slate-100 rounded-xl border-4 border-white shadow-xl flex items-center justify-center" style="background: ${p.color || '#F8F9FA'};">
                            <span class="text-[10px] font-black uppercase tracking-widest text-slate-800">${p.title}</span>
                        </div>
                        <div class="absolute left-0 z-10 h-[80%] bg-white rounded-r-lg shadow-xl transition-all duration-700 ease-out border border-slate-200 overflow-hidden ${isOpen ? 'translate-x-[90%] opacity-100' : 'translate-x-0 opacity-0'}" style="width: 90%;">
                           <img src="${node.imgBg}" class="w-full h-full object-cover">
                        </div>
                    </div>`;
                    break;
                case 'window':
                    content = `<div class="relative bg-white p-2 shadow-2xl rounded-sm overflow-hidden" style="width: ${p.width || 192}px; height: ${p.height || 192}px;">
                        <div class="absolute inset-2 bg-slate-900 overflow-hidden"><img src="${node.imgBg}" class="w-full h-full object-cover opacity-90"></div>
                        <div class="absolute top-2 bottom-2 left-2 w-[calc(50%-8px)] z-20 border-r border-slate-300 transition-transform duration-700 origin-left" style="background: ${p.color || '#868e96'}; transform: ${isOpen ? 'perspective(1000px) rotateY(-110deg)' : 'rotateY(0deg)'}"></div>
                        <div class="absolute top-2 bottom-2 right-2 w-[calc(50%-8px)] z-20 border-l border-slate-300 transition-transform duration-700 origin-right" style="background: ${p.color || '#868e96'}; transform: ${isOpen ? 'perspective(1000px) rotateY(110deg)' : 'rotateY(0deg)'}"></div>
                    </div>`;
                    break;
                case 'filmroll': {
                    const images = (p.images || '').split(',').filter(i => i.trim());
                    const filmImages = images.length > 0 ? images : [node.imgBg];
                    content = `<div class="relative flex items-center">
                        <div class="relative rounded-[2rem] shadow-2xl z-30 flex flex-col items-center justify-center overflow-hidden border-2 border-black/10 cursor-pointer" style="background: ${p.color || '#FFB800'}; width: ${p.width || 96}px; height: ${p.height || 160}px;">
                            <div class="absolute top-0 inset-x-0 h-[15%] bg-slate-900"></div>
                            <div class="relative z-10 font-black text-slate-900 text-[10px] p-2 text-center uppercase">${p.title || 'FILM 400'}</div>
                            <div class="absolute bottom-0 inset-x-0 h-[15%] bg-slate-900"></div>
                        </div>
                        <div class="absolute left-[70%] h-[80%] bg-[#1a1a1a] shadow-2xl transition-all duration-700 ease-in-out z-20 flex items-center px-4 overflow-hidden origin-left" style="width: ${isOpen ? (filmImages.length * 100 + 40) + 'px' : '0px'}; opacity: ${isOpen ? 1 : 0}; border-radius: 0 12px 12px 0;">
                            <div class="flex gap-4">
                                ${filmImages.map(img => `<div class="bg-slate-800 rounded-sm overflow-hidden border border-white/10" style="width: 80px; height: 80px;"><img src="${img}" class="w-full h-full object-cover"></div>`).join('')}
                            </div>
                        </div>
                    </div>`;
                    break;
                }
                case 'accordion':
                    content = `<div class="flex items-center">
                        ${Array.from({length: 4}).map((_, i) => `
                            <div class="h-full bg-white border border-slate-200 shadow-lg relative overflow-hidden transition-all duration-700 ease-in-out" 
                                 style="width: ${isOpen ? (p.width || 192)/4 + 'px' : '10px'}; height: ${p.height || 128}px; transform: skewY(${i%2===0 ? '5deg' : '-5deg'}) translateX(${i * (isOpen ? 0 : -8)}px); z-index: ${4-i};">
                                <img src="${node.imgBg}" class="absolute inset-0 w-full h-full object-cover opacity-60" style="left: -${i*100}%; width: ${p.width || 192}px;">
                                ${i===0 ? `<div class="absolute inset-0 flex items-center justify-center p-2"><span class="text-[8px] font-black text-slate-800 rotate-90">${p.title}</span></div>` : ''}
                            </div>
                        `).join('')}
                    </div>`;
                    break;
                case 'wanted':
                    content = `<div class="relative border-8 border-[#d2b48c] shadow-2xl bg-[#f5deb3] overflow-hidden" style="width: ${p.width || 192}px; height: ${p.height || 256}px;">
                        <div class="flex flex-col items-center p-4">
                            <h2 class="font-black text-slate-900 uppercase text-2xl tracking-tighter mb-1">Wanted</h2>
                            <div class="w-full aspect-square border-4 border-slate-900 mb-2 overflow-hidden">
                                <img src="${node.imgBg}" class="w-full h-full object-cover transition-all duration-1000 ${isOpen ? 'grayscale-0 scale-100' : 'grayscale scale-110 blur-sm'}">
                            </div>
                            <p class="text-xl font-black text-slate-900 tracking-widest">${p.title}</p>
                        </div>
                    </div>`;
                    break;
                case 'suit':
                    content = `<div class="relative flex flex-col items-center justify-end" style="width: ${p.width || 192}px; height: ${p.height || 224}px;">
                        <div class="absolute left-1/2 -translate-x-1/2 w-[40%] transition-all duration-700" style="height: ${isOpen ? '40%' : '10%'}; bottom: 65%; border-left: 4px solid #94a3b8; border-right: 4px solid #94a3b8; border-top: 4px solid #94a3b8; border-radius: 12px 12px 0 0;"></div>
                        <div class="absolute bg-white p-2 shadow-2xl transition-all duration-700 ease-out border border-slate-200 z-10 ${isOpen ? '-translate-y-[90%]' : '-translate-y-[10%] scale-95 opacity-0'}" style="width: ${(p.width||192)*0.8}px; transform-origin: bottom;">
                            <div class="w-full h-32 bg-slate-100 overflow-hidden"><img src="${node.imgBg}" class="w-full h-full object-cover"></div>
                            <p class="mt-2 text-[10px] text-center font-bold text-slate-600">${p.title}</p>
                        </div>
                        <div class="relative w-full h-[70%] rounded-3xl border-4 border-white shadow-2xl z-20" style="background: ${p.color || '#1971c2'};"></div>
                    </div>`;
                    break;
                case 'record':
                    content = `<div class="relative bg-white p-3 rounded-2xl shadow-2xl border-b-8 border-slate-200 flex items-center justify-between" style="width: ${p.width || 208}px; height: ${p.height || 176}px;">
                        <div class="absolute inset-0 rounded-2xl" style="background: ${p.color || '#2d3436'};"></div>
                        <div class="relative z-10 flex items-center w-full gap-2 px-1">
                            <div class="relative rounded-full border-[6px] border-[#1a1a1a] shadow-xl overflow-hidden flex items-center justify-center ${isOpen ? 'animate-spin-slow' : ''}" style="width: 100px; height: 100px;">
                                <div class="rounded-full overflow-hidden border-2 border-white/20 w-[40%] h-[40%]"><img src="${node.imgBg}" class="w-full h-full object-cover"></div>
                            </div>
                            <div class="flex-1 bg-black/20 backdrop-blur-sm rounded-lg p-1 text-white text-[8px] font-black uppercase text-center truncate">${isOpen ? 'Playing...' : p.title}</div>
                        </div>
                    </div>`;
                    break;
                case 'news':
                    content = `<div class="bg-[#f4f1ea] border border-slate-300 shadow-2xl transition-all duration-700 origin-top flex flex-col p-4 overflow-hidden relative ${isOpen ? 'rotate-x-0' : 'rotate-x-45'}" 
                                 style="width: ${isOpen ? (p.width||256) : (p.width||256)*0.6}px; height: ${isOpen ? (p.height||320) : (p.height||320)*0.4}px;">
                        <h3 class="font-black text-slate-800 uppercase leading-none border-b-2 border-slate-800 pb-2 mb-2">${p.title}</h3>
                        <div class="flex-1 flex gap-2">
                           <div class="flex-1 space-y-2">
                             <div class="w-full h-2 bg-slate-300 rounded"></div>
                             <div class="w-[80%] h-2 bg-slate-300 rounded"></div>
                             ${isOpen ? `<div class="w-full h-24 bg-slate-200 rounded overflow-hidden"><img src="${node.imgBg}" class="w-full h-full object-cover"></div>` : ''}
                           </div>
                        </div>
                    </div>`;
                    break;
                default:
                    content = `<div class="bg-white/80 p-2 rounded-xl border border-black/5 text-[10px] font-black uppercase tracking-widest">${node.type} ç»„ä»¶</div>`;
            }
            
            div.innerHTML = content;
            return div;
        }

        function updateView() {
            const left = document.getElementById('left-page');
            const right = document.getElementById('right-page');
            const dots = document.getElementById('dots');
            
            left.innerHTML = ''; right.innerHTML = '';
            dots.innerHTML = '';
            
            const p1 = bookData.pages[activeIdx];
            const p2 = bookData.pages[activeIdx + 1];

            if(p1) p1.nodes.forEach(n => left.appendChild(renderNode(n)));
            if(p2) p2.nodes.forEach(n => right.appendChild(renderNode(n)));

            document.getElementById('prev-btn').classList.toggle('disabled', activeIdx === 0);
            document.getElementById('next-btn').classList.toggle('disabled', activeIdx >= bookData.pages.length - 2);

            for (let i = 0; i < Math.ceil(bookData.pages.length / 2); i++) {
                const dot = document.createElement('div');
                dot.className = `h-1.5 rounded-full transition-all duration-500 ${Math.floor(activeIdx / 2) === i ? 'bg-indigo-500 w-16' : 'bg-white/20 w-6'}`;
                dots.appendChild(dot);
            }

            const scale = Math.min(window.innerWidth * 0.9 / (800 * 2), window.innerHeight * 0.7 / 1120);
            document.getElementById('spread').style.transform = `scale(${scale})`;
        }

        document.getElementById('prev-btn').onclick = () => { if(activeIdx > 0) { activeIdx -= 2; updateView(); } };
        document.getElementById('next-btn').onclick = () => { if(activeIdx < bookData.pages.length - 2) { activeIdx += 2; updateView(); } };
        
        window.onresize = updateView;
        updateView();
    </script>
</body>
</html>